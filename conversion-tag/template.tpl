___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Pepperjam Conversion Tag",
  "categories": ["AFFILIATE_MARKETING", "ADVERTISING"],
  "brand": {
    "id": "github.com/pepperjam/gtm-integration",
    "displayName": "pepperjam",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "A conversion tag needs to be placed on thank you page on the site.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "programID",
    "displayName": "Program ID",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "help": "Enter your Pepperjam program ID. Contact your Pepperjam account rep if you don\u0027t have this number"
  },
  {
    "type": "SELECT",
    "name": "dataLayerType",
    "displayName": "Transaction Object",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "gtm",
        "displayValue": "Enhanced Ecommerce Data Layer"
      },
      {
        "value": "udv",
        "displayValue": "User Defined Variable"
      }
    ],
    "simpleValueType": true,
    "help": "If your container is currently using GTM\u0027s enhance ecommerce feature select \"Enhanced Ecommerce Data Layer\". If you are currently not using that feature select \"User Defined Variable\". Refer to Pepperjam\u0027s documentation on how to create the user defined variable."
  },
  {
    "type": "GROUP",
    "name": "userDefinedGroup",
    "displayName": "",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "TEXT",
        "name": "userVar",
        "displayName": "User Defined Variable",
        "simpleValueType": true,
        "help": "Ensure that the user defined variable returns a string with the parameters in the proper order. ORDER_ID\u003d\u003cORDER_ID\u003e\u0026ITEM_ID1\u003d\u003cITEM_ID\u003e\u0026ITEM_PRICE1\u003d\u003cITEM_PRICE\u003e\u0026QUANTITY1\u003d\u003cQUANTITY\u003e\u0026CATEGORY1\u003d\u003cCATEGORY\u003e\u0026COUPON\u003d\u003cCOUPON\u003e,\u003cCOUPON\u003e"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "dataLayerType",
        "paramValue": "udv",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "CHECKBOX",
    "name": "pixelTypeValidation",
    "checkboxText": "Transaction Type Parameter (Optional)",
    "simpleValueType": true,
    "help": "Transaction Type If not supplied, sale is assumed.",
    "subParams": [
      {
        "type": "SELECT",
        "name": "pixelType",
        "macrosInSelect": true,
        "selectItems": [
          {
            "value": 1,
            "displayValue": "sale"
          },
          {
            "value": 2,
            "displayValue": "lead"
          }
        ],
        "simpleValueType": true,
        "defaultValue": 1,
        "enablingConditions": [
          {
            "paramName": "pixelTypeValidation",
            "paramValue": true,
            "type": "EQUALS"
          }
        ]
      }
    ]
  },
  {
    "type": "CHECKBOX",
    "name": "userTypeValidation",
    "checkboxText": "User Type Parameter (Optional)",
    "simpleValueType": true,
    "help": "Whether or not the customer that placed the order is a new customer in your system using whatever business logic you deem appropriate.  Note: This value should be 1 (one) if the customer is new or 0 (zero) if the customer is not new.",
    "subParams": [
      {
        "type": "TEXT",
        "name": "userType",
        "simpleValueType": true,
        "enablingConditions": [
          {
            "paramName": "userTypeValidation",
            "paramValue": true,
            "type": "EQUALS"
          }
        ]
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "optionalFieldsGTM",
    "displayName": "Optional Product Parameters",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "categoryCheckbox",
        "checkboxText": "Item Category",
        "simpleValueType": true,
        "help": "Enable to collect item category data"
      },
      {
        "type": "CHECKBOX",
        "name": "couponCheckbox",
        "checkboxText": "Transaction/Item Coupon",
        "simpleValueType": true,
        "help": "Enable to collect transaction/item coupon data"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

//APIs
const injectScript = require('injectHiddenIframe');
const queryPermission = require('queryPermission');
const log = require('logToConsole');
const getDL = require('copyFromDataLayer');

//Tag Inputs
const programID = data.programID;
//dropDown Input
const pixelTypeValidation = data.pixelTypeValidation;
//dropDown Value
const pixelType = data.pixelType;
//User Type Checkbox
const userTypeValidation = data.userTypeValidation;
const userType = data.userType;
//dataLayerType
const dataLayerType = data.dataLayerType;
log('data =', data);

//Optional Parameter - GTM Data Layer
const categoryCheckbox = data.categoryCheckbox;
const couponCheckbox = data.couponCheckbox;

//User Defined Variable
const userVar = data.userVar;

const urlSRC = [];
const productsArray = [];
const couponArray = [];

//IF THE USER IS USING GTM'S DATA LAYER
if (dataLayerType == 'gtm') {
  const transactionID = getDL('ecommerce.purchase.actionField.id');
  urlSRC.push("ORDER_ID="+transactionID);
  const products = getDL('ecommerce.purchase.products');
  //CHECKS IF THE USER HAS ENABLED ITEM CATEGORY
  if (categoryCheckbox == true) {
    products.forEach(function(pi, index) {
      if (pi.id) {
        productsArray.push("ITEM_ID" + (index + 1) + "=" + pi.id);
        //log("ITEM_ID" + (index + 1) + "=" + pi.id);
      }
      if (pi.price) {
        productsArray.push("ITEM_PRICE" + (index + 1) + "=" + pi.price);
        //log("ITEM_PRICE" + (index + 1) + "=" + pi.price);
      }
      if (pi.quantity) {
        productsArray.push("QUANTITY" + (index + 1) + "=" + pi.quantity);
        //log("QUANTITY" + (index + 1) + "=" + pi.quantity);
      }
      if (pi.category) {
        productsArray.push("CATEGORY" + (index + 1) + "=" + pi.category);
        //log("CATEGORY" + (index + 1) + "=" + pi.category);
      }
    });
  } else {
    products.forEach(function(pi, index) {
      if (pi.id) {
        productsArray.push("ITEM_ID" + (index + 1) + "=" + pi.id);
        //log("ITEM" + (index + 1) + "=" + pi.id);
      }
      if (pi.price) {
        productsArray.push("ITEM_PRICE" + (index + 1) + "=" + pi.price);
        //log("ITEM_PRICE" + (index + 1) + "=" + pi.price);
      }
      if (pi.quantity) {
        productsArray.push("QUANTITY" + (index + 1) + "=" + pi.quantity);
        //log("QUANTITY" + (index + 1) + "=" + pi.quantity);
      }
    });
  }
  //ADDS productsArray TO THE urlSRC ARRAY
  urlSRC.push(productsArray.join("&"));

  //CHECKS IF THE USER HAS ENABLED COUPONS
  if (couponCheckbox == true) {
    const couponTransaction = getDL('ecommerce.purchase.actionField.coupon');
	//log("couponTrans: " + couponTransaction);
    couponArray.push(couponTransaction);
    products.forEach(function(pi, index) {
      if (pi.coupon){
    	couponArray.push(pi.coupon);
       	//log("couponItem: " + pi.coupon);
      }
    });
    if(couponArray.length >0){
    	urlSRC.push("COUPON=" + couponArray.join(","));
  	}
  }

  //CHECKS IF THE USER HAS ENABLED USER TYPE
  if(userTypeValidation == true){
    urlSRC.push("NEW_TO_FILE=" + userType);
  }

  //CHECKS IF THE USER HAS ENABLED PIXEL TYPE
  if(pixelTypeValidation == true){
    urlSRC.push("TYPE=" + pixelType);
  }else{
    urlSRC.push("TYPE=1");
  }
  //log("transactionID: " + transactionID);
  //log("productsArray: " + productsArray.join("&"));
  //log("couponArray: " + couponArray.join(","));
  log("urlSRC:" + urlSRC);
  const url = "https://t.pepperjamnetwork.com/track?"+"INT=DYNAMIC&PROGRAM_ID=" + programID + "&" + urlSRC.join("&");
  log("Pepperjam: Loading script from " + "INT=DYNAMIC&PROGRAM_ID=" + programID + "&" + urlSRC.join("&"));

  // If the script loaded successfully, log a message and signal success
  const onSuccess = () => {
    log("Pepperjam: Conversion script loaded successfully.");
    data.gtmOnSuccess();
  };

  // If the script fails to load, log a message and signal failure
  const onFailure = () => {
    log("Pepperjam: Conversion script load failed.");
    data.gtmOnFailure();
  };

  // If the URL input by the user matches the permissions set for the template,
  // inject the script with the onSuccess and onFailure methods as callbacks.
  if (queryPermission('inject_hidden_iframe', url)) {
    injectScript(url, onSuccess);
  } else {
    log("Pepperjam: Conversion script load failed due to permissions mismatch.");
    data.gtmOnFailure();
  }

//---------------------------------------------------------------------------------------------//
//-----------------------------------------USER DEFINED----------------------------------------//
//---------------------------------------------------------------------------------------------//

}else if (dataLayerType == 'udv') {
  log("UDV Transaction ID:" + userVar.ecommerce.purchase.actionField.id);
  const transactionID = userVar.ecommerce.purchase.actionField.id;
  urlSRC.push("ORDER_ID="+transactionID);
  const products = userVar.ecommerce.purchase.products;
  //CHECKS IF THE USER HAS ENABLED ITEM CATEGORY
  if (categoryCheckbox == true) {
    products.forEach(function(pi, index) {
      if (pi.id) {
        productsArray.push("ITEM_ID" + (index + 1) + "=" + pi.id);
        //log("ITEM_ID" + (index + 1) + "=" + pi.id);
      }
      if (pi.price) {
        productsArray.push("ITEM_PRICE" + (index + 1) + "=" + pi.price);
        //log("ITEM_PRICE" + (index + 1) + "=" + pi.price);
      }
      if (pi.quantity) {
        productsArray.push("QUANTITY" + (index + 1) + "=" + pi.quantity);
        //log("QUANTITY" + (index + 1) + "=" + pi.quantity);
      }
      if (pi.category) {
        productsArray.push("CATEGORY" + (index + 1) + "=" + pi.category);
        //log("CATEGORY" + (index + 1) + "=" + pi.category);
      }
    });
  } else {
    products.forEach(function(pi, index) {
      if (pi.id) {
        productsArray.push("ITEM_ID" + (index + 1) + "=" + pi.id);
        //log("ITEM" + (index + 1) + "=" + pi.id);
      }
      if (pi.price) {
        productsArray.push("ITEM_PRICE" + (index + 1) + "=" + pi.price);
        //log("ITEM_PRICE" + (index + 1) + "=" + pi.price);
      }
      if (pi.quantity) {
        productsArray.push("QUANTITY" + (index + 1) + "=" + pi.quantity);
        //log("QUANTITY" + (index + 1) + "=" + pi.quantity);
      }
    });
  }
  //ADDS productsArray TO THE urlSRC ARRAY
  urlSRC.push(productsArray.join("&"));

  //CHECKS IF THE USER HAS ENABLED COUPONS
  if (couponCheckbox == true) {
    const couponTransaction = userVar.ecommerce.purchase.actionField.coupon;
	//log("couponTrans: " + couponTransaction);
    couponArray.push(couponTransaction);
    products.forEach(function(pi, index) {
      if (pi.coupon){
    	couponArray.push(pi.coupon);
       	//log("couponItem: " + pi.coupon);
      }
    });
    if(couponArray.length >0){
    	urlSRC.push("COUPON=" + couponArray.join(","));
  	}
  }

  //CHECKS IF THE USER HAS ENABLED USER TYPE
  if(userTypeValidation == true){
    urlSRC.push("NEW_TO_FILE=" + userType);
  }

  //CHECKS IF THE USER HAS ENABLED PIXEL TYPE
  if(pixelTypeValidation == true){
    urlSRC.push("TYPE=" + pixelType);
  }else{
    urlSRC.push("TYPE=1");
  }
  const url = "https://t.pepperjamnetwork.com/track?" + "INT=DYNAMIC&PROGRAM_ID=" + programID + "&" + urlSRC.join("&");
  log("Pepperjam: Loading script from " + "INT=DYNAMIC&PROGRAM_ID=" + programID + "&" + urlSRC.join("&"));

  // If the script loaded successfully, log a message and signal success
  const onSuccess = () => {
    log('Pepperjam: Conversion script loaded successfully.');
    data.gtmOnSuccess();
  };

  // If the script fails to load, log a message and signal failure
  const onFailure = () => {
    log("Pepperjam: Conversion script load failed.");
    data.gtmOnFailure();
  };

  // If the URL input by the user matches the permissions set for the template,
  // inject the script with the onSuccess and onFailure methods as callbacks.
  if (queryPermission('inject_hidden_iframe', url)) {
    injectScript(url, onSuccess);
  } else {
    log("Pepperjam: Conversion script load failed due to permissions mismatch.");
    data.gtmOnFailure();
  }
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_data_layer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keyPatterns",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "ecommerce.*"
              },
              {
                "type": 1,
                "string": "ecommerce.purchase.*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_hidden_iframe",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://t.pepperjamnetwork.com/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 2/25/2020, 3:44:31 PM
